[swagger-codegen](https://github.com/swagger-api/swagger-codegen) docker image, able to manage UID/GID of generated files.

The docker image is named `gisaia/swagger-codegen-2.3.1`, and its version is contained in file [docker_image_version](../docker_image_version)

---

- [Build](#build)
- [Publication](#publication)
- [Usage](#usage)
  * [Examples](#examples)
    + [typescript-fetch](#typescript-fetch)

<small><i><a href='http://ecotrust-canada.github.io/markdown-toc/'>Table of contents generated with markdown-toc</a></i></small>

# Build

```bash
swagger-codegen/2.3.1/build.bash
```

# Publication

```bash
SIMULATE=false swagger-codegen/2.3.1/publish.bash
```

# Usage

The image is to be used with the `docker run` command. Various `docker run` parameters can be used:

Parameter | Type | Description
-|-|-
`-e GROUP_ID=...` | Environment variable passed to the container | Passes a certain group ID to the docker container, so that the files generated by the container are owned by that group. Often used with current group ID: `-e GROUP_ID="$(id -g)"`.
`-e USER_ID=...` | Environment variable passed to the container | Passes a certain user ID to the docker container, so that the files generated by the container are owned by that user. Often used with current user ID: `-e USER_ID="$(id -u)"`.
`--mount dst=/input/api.json,src=...,type=bind,ro` | File bind-mount | Bind-mounts the API description file from the host machine, whose path is indicated by the `src=...` parameter.
`--mount dst=/input/config.json,src=...,type=bind,ro` | File bind-mount | Bind-mounts a configuration file (`swagger-codegen` `-c` option) from the host machine, whose path is indicated by the `src=...` parameter.
`--mount dst=/output,src=...,type=bind` | Directory bind-mount | Bind-mounts a directory from the host machine, where to output the generated code. Its path is indicated by the `src=...` parameter. **Beware, the host directory has to be created in advance**.
| | Command line arguments | You can pass additional `swagger-codegen` options, just by appending them at the end of the `docker run` command (after the name of the image). Example: `-l <language>`

## Examples

### typescript-fetch

```bash
# Create output directory
mkdir -p typescript-fetch

# - Generate code, based on API description file `swagger.json`, and output it in directory `typescript-fetch`.
# - Enforce current UID/GID for the generated files
# - Specify language with `swager-codegen` option `-l`
docker run \
  -e GROUP_ID="$(id -g)" \
  -e USER_ID="$(id -u)" \
  --mount dst=/input/api.json,src="$PWD/swagger.json",type=bind,ro \
  --mount dst=/output,src="$PWD/typescript-fetch",type=bind \
  --rm \
  gisaia/swagger-codegen-2.3.1 \
    -l typescript-fetch
```
