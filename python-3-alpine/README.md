[Python](https://www.python.org/) docker image, able to manage ownership (UID/GID) of built Python libraries (`python setup.py sdist bdist_wheel`, ...).
The docker image is named `gisaia/python-3-alpine`, and its version is contained in file [docker_image_version](docker_image_version)

---

- [Build](#build)
- [Publication](#publication)
- [Usage](#usage)
  * [Example](#example)

<small><i><a href='http://ecotrust-canada.github.io/markdown-toc/'>Table of contents generated with markdown-toc</a></i></small>

# Build

```bash
python-3-alpine/build.bash
```

# Publication

```bash
SIMULATE=false python-3-alpine/publish.bash
```

# Usage

The image is to be used with the `docker run` command. Various `docker run` parameters can be used:

Parameter | Type | Description
-|-|-
`-e GROUP_ID=...` | Environment variable passed to the container | Passes a certain group ID to the docker container, so that the files generated by the container are owned by that group. Often used with current group ID: `-e GROUP_ID="$(id -g)"`.
`-e USER_ID=...` | Environment variable passed to the container | Passes a certain user ID to the docker container, so that the files generated by the container are owned by that user. Often used with current user ID: `-e USER_ID="$(id -u)"`.
`--mount dst=/opt/python,src=...,type=bind` | File bind-mount | Bind-mounts Python project to build from the host machine, whose path is indicated by the `src=...` parameter.
| | Command line arguments | You can pass `.py` file followed by `global_opts` and `cmd_opts` just by appending them at the end of the `docker run` (after the name of the image). Example: `setup.py sdist bdist_wheel`

## Example

```bash

# - Enforce current UID/GID for the generated files
# - Run python command. Here `setup.py sdist bdist_wheel`
docker run \
  -e GROUP_ID="$(id -g)" \
  -e USER_ID="$(id -u)" \
  --mount dst=/opt/python,src="$PWD",type=bind \
  --rm \
  gisaia/python-3-alpine \
    setup.py sdist bdist_wheel
```
