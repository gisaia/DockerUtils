[maven](https://maven.apache.org/) docker image, able to manage ownership (UID/GID) of potentially generated files (`mvn install`, ...).
The docker image is named `gisaia/maven-3.5-jdk8-alpine`, and its version is contained in file [docker_image_version](docker_image_version)

---

- [Build](#build)
- [Publication](#publication)
- [Usage](#usage)
  * [Example](#example)

<small><i><a href='http://ecotrust-canada.github.io/markdown-toc/'>Table of contents generated with markdown-toc</a></i></small>

# Build

```bash
maven-3.5-jdk8-alpine/build.bash
```

# Publication

```bash
SIMULATE=false maven-3.5-jdk8-alpine/publish.bash
```

# Usage

The image is to be used with the `docker run` command. Various `docker run` parameters can be used:

Parameter | Type | Description
-|-|-
`-e GROUP_ID=...` | Environment variable passed to the container | Passes a certain group ID to the docker container, so that the files generated by the container are owned by that group. Often used with current group ID: `-e GROUP_ID="$(id -g)"`.
`-e USER_ID=...` | Environment variable passed to the container | Passes a certain user ID to the docker container, so that the files generated by the container are owned by that user. Often used with current user ID: `-e USER_ID="$(id -u)"`.
`--mount dst=/mnt/.m2,src=...,type=bind,ro` | File bind-mount | Bind-mounts .m2 repository from the host machine, whose path is indicated by the `src=...` parameter.
`--mount dst=/opt/maven,src=...,type=bind,ro` | File bind-mount | Bind-mounts maven project to build from the host machine, whose path is indicated by the `src=...` parameter.
| | Command line arguments | You can pass `mvn` options and phases just by appending them at the end of the `docker run` (after the name of the image). Example: `clean install`

## Example

```bash

# - Enforce current UID/GID for the generated files
# - Execute maven phase. Here `clean install`
docker run \
  -e GROUP_ID="$(id -g)" \
  -e USER_ID="$(id -u)" \
  --mount dst=/mnt/.m2,src="$HOME/.m2/",type=bind \ 
  --mount dst=/opt/maven,src="$PWD",type=bind \
  --rm \
  gisaia/maven-3.5-jdk8-alpine \
    clean install
```
